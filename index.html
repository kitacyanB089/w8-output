<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Step9</title>
    <link rel="stylesheet" href="./style.css">
</head>
<body>
  <section class="section">
    <h1 class="section-headline">1/3 HTML/CSS</h1>
    <h2 class="section-subtitle">1.display:flexを用いたグリッドレイアウト</h2>
    <h2 class="section-indent">1. 横4 × 縦4</h2>
    <div class="grid grid-col-4x4">
      <div>01</div><div>02</div><div>03</div><div>04</div>
      <div>05</div><div>06</div><div>07</div><div>08</div>
      <div>09</div><div>10</div><div>11</div><div>12</div>
      <div>13</div><div>14</div><div>15</div><div>16</div>
    </div>
    <br>
    <h2 class="section-indent">2. 横2 × 縦2</h2>
    <div class="grid grid-col-2x2">
      <div>01</div><div>02</div>
      <div>03</div><div>04</div>
    </div>
    <br>
    <h2 class="section-indent">3. 横6 × 縦1</h2>
    <div class="grid grid-col-6x1">
      <div>01</div><div>02</div><div>03</div><div>04</div><div>05</div><div>06</div>
    </div>
  </section>
    <br>
    <br>
  <section class="secntion section-secounday">
    <h2 class="section-indent">4. ログインフォーム</h2>
    <div class="signin-container">
      <div class="signin-form">
        <h3>Sign in to your account</h3>
        <form class="form" action="/submit">
          <div class="form-group">
            <label for="youremail">Your email</label>
            <input class="input" type="email" id="youremail" name="youremail" placeholder="name@company.com" required>
          </div>
          <div class="form-group">
            <label for="password">Password</label>
            <input class="input" type="password" id="password" name="password" placeholder="････････" required>
          </div>
          <div class="form-group">
            <button type="submit" class="signin-btn">Sign in</button>
          </div>
          <div class="form-group">
            <button type="button" id="clearStorageBtn" class="signin-btn">Clear saved data</button>
          </div>
          <div class="form-footer">
            <label>Don't have an account yet? </label>
            <a href="#" target="_blank">Sign up</a>
          </div>
          <br>
          <br>
        </form>
      </div>
    </div>
  </section>
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      // HTML内の id="userName" な要素を取得（見つからなければ null）
      var emailInput = document.getElementById('youremail');
      var passwordInput = document.getElementById('password');
      var form = document.querySelector('.form');
      var clearBtn = document.getElementById('clearStorageBtn');

      // 復元（ページ読み込み時）
      // 安全チェック: emailInput・passwordInputが存在する場合のみ処理を行う
      if (emailInput && passwordInput) {
        try {
          //ブラウザのLocal Storageから、指定キーの「文字列」を取得する関数
          var savedEmail = localStorage.getItem('signinEmail');
          var savedPassword = localStorage.getItem('signinPassword');
          // 値を書き換える　入力欄の表示値をsavedEmailにする
          if (savedEmail) emailInput.value = savedEmail; // 値がある時だけ上書き
          if (savedPassword) passwordInput.value = savedPassword;
        } catch (e) {}
      }

      // 保存（フォーム送信時）
      // 安全チェック: form・emailInput・passwordInputが全て存在する場合のみ処理を行う
      // どれか一つでも取得に失敗してnullだと、イベント登録時にエラーになるため
      if (form && emailInput && passwordInput) {
        form.addEventListener('submit', function () {
          try {
            // 値を保存する
            localStorage.setItem('signinEmail', emailInput.value || '');
            localStorage.setItem('signinPassword', passwordInput.value || '');
          } catch (e) {}
        });
      }

      // Local Storage全消去とフォーム初期化
      if (clearBtn) {
        clearBtn.addEventListener('click', function () {
          if (confirm('保存されたデータをすべて削除しますか？')) {
            try { localStorage.clear(); } catch (e) {}
            if (emailInput) emailInput.value = '';
            if (passwordInput) passwordInput.value = '';
            alert('保存データを削除しました');
          }
        });
      }
    });
  </script>
</body>
</html>